<include file="Common/header-bench" />
<div class="row">
    <div class="col-md-12">
        <ul class="nav nav-tabs">
            <li><a href="{:AU('connect/weixin')}">接入第三方微信平台</a></li>
            <if condition="!empty($entity)">
                <li class="active"><a href="{:U('control/weixin?do=modify&id=' . $entity['id'])}">编辑接入</a></li>
                <li><a href="{:AU('connect/weixin?do=create')}">添加接入</a></li>
                <else/>
                <li class="active"><a href="{:AU('connect/weixin?do=create')}">添加接入</a></li>
            </if>
        </ul>
    </div>
    <div class="box col-md-12">
        <div class="box-inner">
            <div class="box-header well" data-original-title="">
                <h2><i class="fa fa-list"></i> 接入第三方微信平台</h2>
            </div>
            <div class="box-content">
                <script>
                    require(['jquery', 'util'], function($, u){
                        $('#theform').submit(function(){
                            if($.trim($('input[name="title"]').val()) == '') {
                                u.message('必须输入平台名称');
                                return false;
                            }
                            if($.trim($('input[name="url"]').val()) == '') {
                                u.message('必须输入平台接口地址');
                                return false;
                            }
                            if($.trim($('input[name="token"]').val()) == '') {
                                u.message('必须输入平台接口Token');
                                return false;
                            }
                        });
                    });
                </script>
                <div class="alert alert-info">
                    使用接入第三方微信平台的功能，你可以兼容其他的微信公众平台管理工具. 可以接入不同平台的功能一起使用. <br>
                    <strong>注意: 使用这个功能, 将会在系统没有正确回应的时候, 返回第三方平台的结果</strong>
                </div>
                <form id="theform" action="" method="post" class="form-horizontal" group="form">
                    <div class="form-group">
                        <label class="col-sm-2 control-label">平台名称</label>
                        <div class="col-sm-5">
                            <input class="form-control" type="text" name="title" value="{$entity['title']}"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">接口地址</label>
                        <div class="col-sm-8">
                            <input class="form-control" type="text" name="url" value="{$entity['url']}"/>
                            <div class="help-block">
                                你应该填写第三方平台提供给你保存至公众平台的URL和Token
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">接入Token</label>
                        <div class="col-sm-5">
                            <input class="form-control" type="text" name="token" value="{$entity['token']}"/>
                            <div class="help-block">
                                与目标平台接入设置值一致，必须为英文或者数字，长度为3到32个字符
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">说明</label>
                        <div class="col-sm-5">
                            <textarea name="remark" class="form-control" rows="4">{$entity['remark']}</textarea>
                            <div class="help-block">
                                与目标平台接入设置值一致，必须为英文或者数字，长度为3到32个字符
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-offset-2 col-sm-1">
                            <if condition="!empty($entity)">
                                <button type="submit" class="btn btn-block btn-default">保存</button>
                                <else/>
                                <button type="submit" class="btn btn-block btn-default">新增</button>
                            </if>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<include file="Common/footer-bench" />
